<%# Headline %>
<% case @type %>
<% when :all_published_tasks %>
  <h1 class="text-center mb-4 text-2xl font-extrabold leading-none tracking-tight text-gray-900 md:text-3xl lg:text-4xl dark:text-white"><%= @tasks.size %> <span class="text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400">Aufgaben</span> warten auf dich!</h1>
<% when :tasks_for_project %>
  <h1 class="text-center mb-4 text-2xl font-extrabold leading-none tracking-tight text-gray-900 md:text-3xl lg:text-4xl dark:text-white"><%= @tasks.size %> <span class="text-transparent bg-clip-text bg-gradient-to-r to-emerald-600 from-sky-400">Aufgaben</span> in <%= @selected_project.title %></h1>
<% end %>

<%# Filter by projects %>
<% if @projects.size > 0 %>
  <ul class="flex flex-wrap gap-2">
    <%= link_to tasks_path do %>
      <li><%= render BadgeComponent.new("Alle", size: :extra_large, border: !params[:project_id].present?) %></li>
    <% end %>
    <% @projects.each do |project| %>
      <li>
        <%= link_to project_tasks_path(project) do %>
          <%= render BadgeComponent.new(project.title,
                                        size: :extra_large,
                                        scheme: BadgeComponent.scheme_by_id(project.id),
                                        border: (project.id.to_s == params[:project_id])) %>
        <% end %>
      </li>
    <% end %>
  </ul>
<% end %>

<%# Tasks displayed as cards in a grid %>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
  <% @tasks.each do |task| %>
    <%= render TaskCardComponent.new(task) %>
  <% end %>
</div>

<%# Link to all tasks when filter is applied %>
<% if @type != :all_published_tasks %>
  <hr class="hidden sm:flex h-px my-8 bg-gray-200 border-0 dark:bg-gray-700">
  <div class="flex items-center justify-center w-full">
    <%= render ::ButtonComponent.new(tag: :a, href: tasks_path, scheme: :alternative, size: :large, class: "w-full text-center").with_content("Alle Aufgaben ansehen") %>
  </div>
<% end %>
