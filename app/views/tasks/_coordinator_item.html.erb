<%
  case target
  when "modal"
    id_prefix = "modal_"
    avatar_size = :extra_small
    font_size = "font-small"
    is_readonly = false
  else
    id_prefix = ""
    avatar_size = :small
    font_size = "font-medium"
    is_readonly = true
  end
%>
<li>
  <label class="cursor-pointer group">
    <% if is_readonly %>
      <%= hidden_field_tag "task_form[coordinator_ids][]",
                           coordinator.id,
                           id: "coordinator_ids_#{coordinator.id}" %>
    <% else %>
      <%= checkbox_tag "coordinator_ids[]",
                       coordinator.id,
                       is_checked,
                       id: "#{id_prefix}coordinator_ids_#{coordinator.id}",
                       "data-action": "change->list-mover#toggle",
                       class: "sr-only peer" %>
    <% end %>

    <span class="flex items-center gap-2 text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white p-2 peer-focus:ring-2 peer-focus:ring-blue-500">
      <%= render AvatarComponent.new(src: coordinator.avatar_url, size: avatar_size) %>
      <%= tag.span coordinator.name, class: "#{font_size} dark:text-white truncate" %>
    </span>
  </label>
</li>
